<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Регистрация</title>
<script>
async function registerUser(event) {
    event.preventDefault();
    const email = document.getElementById('email').value.trim();
    const login = document.getElementById('login').value.trim();
    const password = document.getElementById('password').value;
    const phone = document.getElementById('phone').value.trim();

    const data = { email, login, password };
    if (phone !== '') data.phone = phone;

    try {
        const response = await fetch('api/v1/auth/register', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        });
        const result = await response.json();
        alert(result.message);
        if (result.success) {
            window.location.href = '/login.html'; // редирект на страницу логина
        }
    } catch (error) {
        alert('Ошибка сети: ' + error.message);
    }
}
</script>
</head>
<body>
<h1>Регистрация</h1>
<form id="registerForm" onsubmit="registerUser(event)">
    <label>
        Email:<br />
        <input type="email" id="email" required />
    </label><br /><br />
    <label>
        Логин:<br />
        <input type="text" id="login" minlength="3" maxlength="100" required />
    </label><br /><br />
    <label>
        Пароль:<br />
        <input type="password" id="password" minlength="8" required />
    </label><br /><br />
    <label>
        Телефон (не обязательно):<br />
        <input type="text" id="phone" pattern="\\+?[0-9]{7,15}" />
    </label><br /><br />
    <button type="submit">Зарегистрироваться</button>
</form>
<p>Есть аккаунт? <a href="/login.html">Войти</a></p>
</body>
</html>
